include ':app'
rootProject.name = "My Application"
addSubfolderProjects("DummySubmodules/sources/common", "common")
addSubfolderProjects("DummySubmodules/sources/domain", "domain")
addSubfolderProjects("DummySubmodules/sources/data", "data")

def addSubfolderProjects(String relativePath, String prefix = "") {
    def folder = file("$rootProject.projectDir/$relativePath")
    folder.eachDir { nestedDir ->
        if (nestedDir.listFiles().any { it.name == 'build.gradle' }) {
            def projectDir = nestedDir.name
            def projectName = projectDir
            if (!prefix.empty) {
                projectName = "$prefix-$nestedDir.name"
            }

            include projectName
            project(":${projectName}").projectDir = nestedDir
        }
    }
}